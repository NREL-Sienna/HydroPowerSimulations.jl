var documenterSearchIndex = {"docs":
[{"location":"model_library/formulation/#HydroPowerSimulations-Formulations","page":"Formulation Library","title":"HydroPowerSimulations Formulations","text":"","category":"section"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Hydro generation formulations define the optimization models that describe hydro units mathematical model in different operational settings, such as economic dispatch and unit commitment.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"note: Note\nThe use of reactive power variables and constraints will depend on the network model used, i.e., whether it uses (or does not use) reactive power. If the network model is purely active power-based,  reactive power variables and related constraints are not created.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"note: Note\nReserve variables for services are not included in the formulation, albeit their inclusion change the variables, expressions, constraints and objective functions created. A detailed description of the implications in the optimization models is described in the Service formulation in the PowerSimulations documentation.","category":"page"},{"location":"model_library/formulation/#Table-of-Contents","page":"Formulation Library","title":"Table of Contents","text":"","category":"section"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"HydroDispatchRunOfRiver\nHydroDispatchRunOfRiverBudget\nHydroCommitmentRunOfRiver\nHydroTurbineEnergyDispatch\nHydroTurbineBilinearDispatch\nHydroEnergyModelReservoir\nHydroWaterModelReservoir\nHydroEnergyBlockOptimization","category":"page"},{"location":"model_library/formulation/#HydroDispatchRunOfRiver","page":"Formulation Library","title":"HydroDispatchRunOfRiver","text":"","category":"section"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Formulation type to add injection variables constrained by a maximum injection time series for PowerSystems.HydroGen","category":"page"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroDispatchRunOfRiver-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroDispatchRunOfRiver","text":"Formulation type to add injection variables constrained by a maximum injection time series for PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"PowerSimulations.ActivePowerVariable:\nBounds: [0.0, ]\nSymbol: p^texthy\nPowerSimulations.ReactivePowerVariable:\nBounds: [0.0, ]\nSymbol: q^texthy","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Auxiliary Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"HydroEnergyOutput:\nSymbol: E^texthyout","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The HydroEnergyOutput is computed as the energy used at each time step from the hydro, computed simply as E^texthyout cdot Delta T, where Delta T is the duration (in hours) of each time step.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"P^texthymin = PowerSystems.get_active_power_limits(device).min\nP^texthymax = PowerSystems.get_active_power_limits(device).max\nQ^texthymin = PowerSystems.get_reactive_power_limits(device).min\nQ^texthymax = PowerSystems.get_reactive_power_limits(device).max","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Time Series Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Uses the max_active_power timeseries parameter to limit the available active power at each time-step. If the timeseries parameter is not included, the power is limited by P^textthmax.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro unit by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to the PowerSimulations.ActivePowerBalance expression and q^texthy to the PowerSimulations.ReactivePowerBalance, to be used in the supply-balance constraint depending on the network model used.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to HydroServedReserveUpExpression/HydroServedReserveDownExpression expressions to keep track of served reserve up/down for energy calculations.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro unit creates the range constraints for its active and reactive power depending on its static parameters.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n  P^texthymin le p^texthy_t le textActivePowerTimeSeriesParameter_t quad forall tin 1 dots T \n  Q^texthymin le q^texthy_t le Q^texthymax quad forall tin 1 dots T \nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroDispatchRunOfRiverBudget","page":"Formulation Library","title":"HydroDispatchRunOfRiverBudget","text":"","category":"section"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Formulation type to add injection variables constrained by a maximum injection time series and a budget time series for PowerSystems.HydroGen. This formulation is equivalent than HydroDispatchRunOfRiver, but with the option to include a time series with a budget.","category":"page"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroDispatchRunOfRiverBudget-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroDispatchRunOfRiverBudget","text":"Formulation type to add injection variables constrained by a maximum injection time series for PowerSystems.HydroGen and a budget\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"PowerSimulations.ActivePowerVariable:\nBounds: [0.0, ]\nSymbol: p^texthy\nPowerSimulations.ReactivePowerVariable:\nBounds: [0.0, ]\nSymbol: q^texthy","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Auxiliary Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"HydroEnergyOutput:\nSymbol: E^texthyout","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The HydroEnergyOutput is computed as the energy used at each time step from the hydro, computed simply as E^texthyout cdot Delta T, where Delta T is the duration (in hours) of each time step.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"P^texthymin = PowerSystems.get_active_power_limits(device).min\nP^texthymax = PowerSystems.get_active_power_limits(device).max\nQ^texthymin = PowerSystems.get_reactive_power_limits(device).min\nQ^texthymax = PowerSystems.get_reactive_power_limits(device).max","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Time Series Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Uses the max_active_power timeseries parameter to limit the available active power at each time-step. If the timeseries parameter is not included, the power is limited by P^textthmax.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Uses the hydro_budget timeseries parameter to limit the sum of available active power throughout the horizon. An attribute hydro_budget_interval can be used to also limit the sum during a specified interval (smaller than the horizon) during a simulation.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Attributes:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"During the model setup, the attribute hydro_budget_interval can be used to set-up a budget constraint with smaller interval than the full horizon of the simulation. For example if a problem has an horizon of Hour(48), with an hourly resolution, the attribute hydro_budget_interval = Hour(24) can be used to also impose a budget constraint in the first 24 hours (in addition of the full 48 hours constraint).","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro unit by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to the PowerSimulations.ActivePowerBalance expression and q^texthy to the PowerSimulations.ReactivePowerBalance, to be used in the supply-balance constraint depending on the network model used.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to HydroServedReserveUpExpression/HydroServedReserveDownExpression expressions to keep track of served reserve up/down for energy calculations.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro unit creates the range constraints for its active and reactive power depending on its static parameters.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n  P^texthymin le p^texthy_t le textActivePowerTimeSeriesParameter_t quad forall tin 1 dots T \n  Q^texthymin le q^texthy_t le Q^texthymax quad forall tin 1 dots T \n sum_t = 1^T p^texthy_t le sum_t = 1^T  textEnergyBudgetTimeSeriesParameter_t \n sum_t = 1^T_textinterval p^texthy_t le sum_t = 1^T_textinterval  textEnergyBudgetTimeSeriesParameter_t quad textif T_textintervaltext is specified\nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroCommitmentRunOfRiver","page":"Formulation Library","title":"HydroCommitmentRunOfRiver","text":"","category":"section"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroCommitmentRunOfRiver-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroCommitmentRunOfRiver","text":"Formulation type to add commitment and injection variables constrained by a maximum injection time series for PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"PowerSimulations.ActivePowerVariable:\nBounds: [0.0, ]\nSymbol: p^texthy\nPowerSimulations.ReactivePowerVariable:\nBounds: [0.0, ]\nSymbol: q^texthy\nPowerSimulations.OnVariable:\nBounds: 0 1\nSymbol: u^texthy","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Auxiliary Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"HydroEnergyOutput:\nSymbol: E^texthyout","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The HydroEnergyOutput is computed as the energy used at each time step from the hydro, computed simply as E^texthyout cdot Delta T, where Delta T is the duration (in hours) of each time step.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"P^texthymin = PowerSystems.get_active_power_limits(device).min\nP^texthymax = PowerSystems.get_active_power_limits(device).max\nQ^texthymin = PowerSystems.get_reactive_power_limits(device).min\nQ^texthymax = PowerSystems.get_reactive_power_limits(device).max","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Time Series Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Uses the max_active_power timeseries parameter to limit the available active power at each time-step. If the timeseries parameter is not included, the power is limited by P^textthmax.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro unit by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to the PowerSimulations.ActivePowerBalance expression and q^texthy to the PowerSimulations.ReactivePowerBalance, to be used in the supply-balance constraint depending on the network model used.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro unit creates the range constraints for its active and reactive power depending on its static parameters.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n  u_t^texthy P^texthymin le p^texthy_t le u_t^texthy textActivePowerTimeSeriesParameter_t quad forall tin 1 dots T \n u_t^texthy Q^texthymin le q^texthy_t le u_t^texthy Q^texthymax quad forall tin 1 dots T \nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroTurbineEnergyDispatch","page":"Formulation Library","title":"HydroTurbineEnergyDispatch","text":"","category":"section"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroTurbineEnergyDispatch-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroTurbineEnergyDispatch","text":"Formulation type to add injection variables for a PowerSystems.HydroTurbine only using energy variables (no water flow variables)\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"PowerSimulations.ActivePowerVariable:\nBounds: [0.0, ]\nSymbol: p^texthy\nPowerSimulations.ReactivePowerVariable:\nBounds: [0.0, ]\nSymbol: q^texthy","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Auxiliary Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"HydroEnergyOutput:\nSymbol: E^texthyout","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The HydroEnergyOutput is computed as the energy used at each time step from the hydro turbine, computed simply as E^texthyout = p^texthy cdot Delta T, where Delta T is the duration (in hours) of each time step.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"P^texthymin = PowerSystems.get_active_power_limits(device).min\nP^texthymax = PowerSystems.get_active_power_limits(device).max\nQ^texthymin = PowerSystems.get_reactive_power_limits(device).min\nQ^texthymax = PowerSystems.get_reactive_power_limits(device).max","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro turbine by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to the PowerSimulations.ActivePowerBalance expression and q^texthy to the PowerSimulations.ReactivePowerBalance, to be used in the supply-balance constraint depending on the network model used.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro turbine creates the range constraints for its active and reactive power depending on its static parameters, and energy balance constraints for the reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n  P^texthymin le p^texthy_t le P^texthymax quad forall tin 1 dots T \n  Q^texthymin le q^texthy_t le Q^texthymax quad forall tin 1 dots T \nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroTurbineBilinearDispatch","page":"Formulation Library","title":"HydroTurbineBilinearDispatch","text":"","category":"section"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroTurbineBilinearDispatch-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroTurbineBilinearDispatch","text":"Formulation type to add injection variables for a HydroTurbine connected to reservoirs using a bilinear model (with water flow variables) PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"PowerSimulations.ActivePowerVariable:\nBounds: [0.0, ]\nSymbol: p^texthy\nPowerSimulations.ReactivePowerVariable:\nBounds: [0.0, ]\nSymbol: q^texthy\nHydroTurbineFlowRateVariable:\nBounds: [0.0, ]\nSymbol: f^texthy","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions added:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"TotalHydroFlowRateTurbineOutgoing:\nSymbol: f^texthyout","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The TotalHydroFlowRateTurbineOutgoing is computed as the total water flow outgoing of a turbine. This is helpful if the turbine is feed by multiple upstream reservoirs.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"P^texthymin = PowerSystems.get_active_power_limits(device).min\nP^texthymax = PowerSystems.get_active_power_limits(device).max\nQ^texthymin = PowerSystems.get_reactive_power_limits(device).min\nQ^texthymax = PowerSystems.get_reactive_power_limits(device).max\nF^texthy max = PowerSystems.get_outflow_limits(device).max\nF^texthy min = PowerSystems.get_outflow_limits(device).min\ntextpowH = PowerSystems.get_powerhouse_elevation(device)","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro turbine by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Adds p^texthy to the PowerSimulations.ActivePowerBalance expression and q^texthy to the PowerSimulations.ReactivePowerBalance, to be used in the supply-balance constraint depending on the network model used.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro turbine creates the range constraints for its active, reactive power and water flow depending on its static parameters. By defining the set mathcalR^up as the set of upstream reservoirs connected to the turbine, the turbine power output relationship can be added.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n  P^texthymin le p^texthy_t le P^texthymax quad forall tin 1 dots T \n  Q^texthymin le q^texthy_t le Q^texthymax quad forall tin 1 dots T \n  F^texthymin le f^texthy_t le F^texthymax quad forall tin 1 dots T \n  p^texthy = 10^-6 cdot textSysBasePower^-1 cdot rho g sum_r in mathcalR^up f^texthy_rt left(h_rt + textinH - textpowH right) \nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"where h is the effective hydraulic head (above the intake), the textinH is the intake elevation (in meters above the sea level), textpowH is the powerhouse elevation (in meters above the sea level), g = 981 textms^2 is the gravitational constant, and rho = 1000 textkgm^3 is the water density. Finally, the term 10^-6 cdot textSysBasePower^-1 is used to transform the power in Watts into per-unit.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroEnergyModelReservoir","page":"Formulation Library","title":"HydroEnergyModelReservoir","text":"","category":"section"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroEnergyModelReservoir-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroEnergyModelReservoir","text":"Formulation type to add reservoir methods with hydro turbines using only energy inflow/outflow variables (no water flow variables) for PowerSystems.HydroReservoir\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"PowerSimulations.EnergyVariable:\nBounds: E^textmin E^textmax\nSymbol: e^texthy\nWaterSpillageVariable:\nBounds: S^textmin S^textmax\nSymbol: s\nHydroEnergySurplusVariable:\nBounds: -E^textmax 00\nSymbol: e^textsurplus\nHydroEnergyShortageVariable:\nBounds: 00 E^textmax\nSymbol: e^textshortage","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions added:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"TotalHydroPowerReservoirIncoming:\nSymbol: p^texthyin\nTotalHydroPowerReservoirOutgoing:\nSymbol: p^texthyout\nTotalSpillagePowerReservoirIncoming:\nSymbol: s^textin","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"E^textmax = PowerSystems.get_storage_level_limits(device).max\nE^textmin = PowerSystems.get_storage_level_limits(device).min\nE^textinit = PowerSystems.get_initial_level(device)\nS^textmax = PowerSystems.get_spillage_limits(device).max\nS^textmin = PowerSystems.get_spillage_limits(device).min","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Initial Conditions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The PowerSimulations.InitialEnergyLevel: e_0 = E^textinit is used as the initial condition for the energy level of the reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Time Series Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Uses the storage_target timeseries parameter to set a storage target of the reservoir, hydro_budget timeseries parameter to set a hydro budget of the reservoir and the inflow timeseries parameter to obtain the inflow to the reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro reservoir by adding it to its ProductionCostExpression. This model has shortage costs for the energy target that are also added to the objective function. In case of no shortage cost are specified, the model will turn-off the shortage variable to avoid infeasible/unbounded problems.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"In addition the incoming turbine power expression p^texthyin handles the total power coming from upstream turbines connected to this reservoir, the outgoing turbine power expression p^texthyout handles the total power going out to the downstream turbines from this reservoir. Finally, the incoming spillage expression s^textin handles the power coming from upstream reservoirs that was spilled into this reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Attributes:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"During the model setup, the attribute hydro_budget = true can be used to set-up a budget constraint with the full horizon of the simulation. The attribute storage_target = true can be used to set-up a storage target constraint at the end of the simulation horizon. It is not recommended to set both attributes to true simultaneously to avoid infeasibility issues.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro reservoir creates the constraints to track the energy storage.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n e_t^texthy = e_t-1^texthy + Delta T left(p^texthyin_t + s^textin_t + textInflowTimeSeriesParameter_t - p^texthyout - s^texthyright) quad forall tin 1 dots T \n e_T^texthy + e^textshortage + e^textsurplus = textEnergyTargetTimeSeriesParameter_T quad text if storage_target true \n sum_t=1^T p^texthy_t le sum_t=1^T textEnergyBudgetTimeSeriesParameter_t quad text if hydro_budget true\nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroWaterModelReservoir","page":"Formulation Library","title":"HydroWaterModelReservoir","text":"","category":"section"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroWaterModelReservoir-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroWaterModelReservoir","text":"Formulation type to add reservoir methods with hydro turbines using water flow variables for PowerSystems.HydroReservoir\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"HydroReservoirHeadVariable:\nBounds: L^texthead min L^texthead max\nSymbol: h^texthy\nHydroReservoirVolumeVariable:\nBounds: L^textvol min L^textvol max\nSymbol: v^texthy\nWaterSpillageVariable:\nBounds: S^textmin S^textmax\nSymbol: s","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions added:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"TotalHydroFlowRateReservoirIncoming:\nSymbol: f^texthyin\nTotalHydroFlowRateReservoirOutgoing:\nSymbol: f^texthyout\nTotalSpillageFlowRateReservoirIncoming:\nSymbol: s^textin","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"L^textmax = PowerSystems.get_storage_level_limits(device).max\nL^textmin = PowerSystems.get_storage_level_limits(device).min\nL^textinit = PowerSystems.get_initial_level(device)\nS^textmax = PowerSystems.get_spillage_limits(device).max\nS^textmin = PowerSystems.get_spillage_limits(device).min\ntexth2v = PowerSystems.get_head_to_volume_factor(device)","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The parameter L for level will be dependent on the ReservoirDataType provided in each reservoir, and can bound the hydraulic head or volume variable.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Initial Conditions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The InitialReservoirVolume: l_0 = L^textinit is used as the initial condition for the volume level of the reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Time Series Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The inflow and outflow timeseries parameter are used to obtain the external inflow and outflow to the reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro reservoir by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"The incoming turbine flow expression f^texthyin handles the total water flow coming from upstream turbines connected to this reservoir, the outgoing turbine flow expression f^texthyout handles the total water flow going out to the downstream turbines from this reservoir. Finally, the incoming spillage expression s^textin handles the water flow coming from upstream reservoirs that was spilled into this reservoir.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Attributes:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"During the model setup, the attribute hydro_budget = true can be used to set-up a budget constraint with the full horizon of the simulation. The attribute storage_target = true can be used to set-up a storage target constraint at the end of the simulation horizon. It is not recommended to set both attributes to true simultaneously to avoid infeasibility issues.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"For each hydro reservoir creates the constraints to track the energy storage.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n v_t^texthy = v_t-1^texthy + 3600Delta T left(f^texthyin_t + s^textin_t + textInflowTimeSeriesParameter_t - p^texthyout - s^texthy- textOutflowTimeSeriesParameter_tright) quad forall tin 1 dots T \n v_t^texthy = texth2v cdot  h_t^texthy quad forall tin 1 dots T  \nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"model_library/formulation/#HydroEnergyBlockOptimization","page":"Formulation Library","title":"HydroEnergyBlockOptimization","text":"","category":"section"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Formulation type to constrain hydropower production with an energy block optimization representation of the energy storage capacity and water inflow time series of a reservoir for [PowerSystems.HydroGen]","category":"page"},{"location":"model_library/formulation/#HydroPowerSimulations.HydroEnergyBlockOptimization-model_library-formulation","page":"Formulation Library","title":"HydroPowerSimulations.HydroEnergyBlockOptimization","text":"Formulation type to constrain hydropower production with an energy block optimization representation of the energy storage capacity and water inflow time series of a reservoir for PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Initial Conditions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Auxiliary Variables:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Static Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"eta:  Turbine efficiency\nrho:  water density = 1000 kgm^3\ng: Gravitational constant = 981 ms^2\nK: Energy block constant =  eta rho g\nh2v: Head to volume conversion factor.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Time Series Parameters:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Uses the InflowTimeSeriesParameter and OutflowTimeSeriesParameter for track the water inflow and outflow at each time-step.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Objective:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Add a cost to the objective function depending on the defined cost structure of the hydro unit by adding it to its ProductionCostExpression.","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Expressions:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"Constraints:","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"beginalign*\n  p^texthy_1 = K times f^textout_hy 1 (h2v times v_res 0 + H^textelevation_hy) quad \n  p^texthy_t = K times f^textout_hy t (05 times h2v (v_res t-1 + v_res t + H^textelevation_hy) quad forall t in 1 dots T\nendalign*","category":"page"},{"location":"model_library/formulation/","page":"Formulation Library","title":"Formulation Library","text":"","category":"page"},{"location":"how_to/include_limits_and_targets/#Including-budget-limits-for-HydroDispatch","page":"...include budget limit and storage targets to Hydro models","title":"Including budget limits for HydroDispatch","text":"","category":"section"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"`HydroDispatch: can include budget limits if the HydroDispatchRunOfRiverBudget formulation is used. By adding a hydro_budgettimeseries with values between 0 and 1, normalized by theget_active_power_limits(hydro).max, a single constraint is imposed as the budget during the simulation horizon:","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"beginalign*\nsum_t=1^T p^texthy_t le sum_t=1^T textEnergyBudgetTimeSeriesParameter_t\nendalign*","category":"page"},{"location":"how_to/include_limits_and_targets/#Setting-an-interval-budget-for-[HydroDispatchRunOfRiverBudget](@ref)","page":"...include budget limit and storage targets to Hydro models","title":"Setting an interval budget for HydroDispatchRunOfRiverBudget","text":"","category":"section"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"The attribute hydro_budget_interval can be used to set-up a budget constraint with smaller interval than the full horizon of the simulation. For example if a problem has an horizon of Hour(48), with an hourly resolution, the attribute hydro_budget_interval = Hour(24) can be used to also impose a budget constraint in the first 24 hours (in addition of the full 48 hours constraint):","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"hydro_model = DeviceModel(\n    HydroDispatch,\n    HydroDispatchRunOfRiverBudget;\n    attributes = Dict{String, Any}(\n        \"hydro_budget_interval\" => Hour(24),\n    ),\n)\n\nset_device_model!(template, hydro_model)","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"If no attribute is passed, only the horizon constraint is imposed.","category":"page"},{"location":"how_to/include_limits_and_targets/#Including-budget-limits-for-[HydroReservoir](@extref-PowerSystems.HydroReservoir)","page":"...include budget limit and storage targets to Hydro models","title":"Including budget limits for HydroReservoir","text":"","category":"section"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"HydroEnergyModelReservoir: The budget limits are enabled in the DeviceModel by setting the hydro_budget key to true in the attributes Dict. For example:","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"reservoir_model = DeviceModel(\n    HydroReservoir,\n    HydroEnergyModelReservoir;\n    attributes = Dict{String, Any}(\n        \"energy_target\" => false,\n        \"hydro_budget\" => true,\n    ),\n)\n\nset_device_model!(template, reservoir_model)","category":"page"},{"location":"how_to/include_limits_and_targets/#Setting-a-budget-for-[HydroEnergyModelReservoir](@ref)","page":"...include budget limit and storage targets to Hydro models","title":"Setting a budget for HydroEnergyModelReservoir","text":"","category":"section"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"If the hydro_budget attribute is enabled for the HydroEnergyModelReservoir, the EnergyBudgetConstraint will be added to limit the sum of active power budget to be less than or equal to the sum of the energy budget EnergyBudgetTimeSeriesParameter for all time steps. See the article on format data for more details.","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"beginalign*\nsum_t=1^T p^texthy_t le sum_t=1^T textEnergyBudgetTimeSeriesParameter_t\nendalign*","category":"page"},{"location":"how_to/include_limits_and_targets/#Including-storage-target-for-[HydroReservoir](@extref-PowerSystems.HydroReservoir)","page":"...include budget limit and storage targets to Hydro models","title":"Including storage target for HydroReservoir","text":"","category":"section"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"HydroEnergyModelReservoir: The storage targets are enabled in the DeviceModel by setting the energy_target key to true in the attributes Dict. For example:","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"reservoir_model = DeviceModel(\n    HydroReservoir,\n    HydroEnergyModelReservoir;\n    attributes = Dict{String, Any}(\n        \"energy_target\" => true,\n        \"hydro_budget\" => false,\n    ),\n)\n\nset_device_model!(template, reservoir_model)","category":"page"},{"location":"how_to/include_limits_and_targets/#Setting-a-target-for-[HydroEnergyModelReservoir](@ref)","page":"...include budget limit and storage targets to Hydro models","title":"Setting a target for HydroEnergyModelReservoir","text":"","category":"section"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"If the energy_target attribute is enabled for the HydroEnergyModelReservoir, the EnergyTargetConstraint will be added  EnergyTargetTimeSeriesParameter at every timestep.  See the article on format data for more details.","category":"page"},{"location":"how_to/include_limits_and_targets/","page":"...include budget limit and storage targets to Hydro models","title":"...include budget limit and storage targets to Hydro models","text":"beginalign*\ntextenergy_T + textshortage_T + textsurplus_T =  textEnergyTargetTimeSeriesParameter_T \nendalign*","category":"page"},{"location":"api/public/#Public-API-Reference","page":"Public API Reference","title":"Public API Reference","text":"","category":"section"},{"location":"api/public/","page":"Public API Reference","title":"Public API Reference","text":"Pages = [\"public.md\"]\nDepth = 2","category":"page"},{"location":"api/public/#Formulations","page":"Public API Reference","title":"Formulations","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.HydroCommitmentRunOfRiver","page":"Public API Reference","title":"HydroPowerSimulations.HydroCommitmentRunOfRiver","text":"Formulation type to add commitment and injection variables constrained by a maximum injection time series for PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroDispatchRunOfRiver","page":"Public API Reference","title":"HydroPowerSimulations.HydroDispatchRunOfRiver","text":"Formulation type to add injection variables constrained by a maximum injection time series for PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroDispatchRunOfRiverBudget","page":"Public API Reference","title":"HydroPowerSimulations.HydroDispatchRunOfRiverBudget","text":"Formulation type to add injection variables constrained by a maximum injection time series for PowerSystems.HydroGen and a budget\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroEnergyBlockOptimization","page":"Public API Reference","title":"HydroPowerSimulations.HydroEnergyBlockOptimization","text":"Formulation type to constrain hydropower production with an energy block optimization representation of the energy storage capacity and water inflow time series of a reservoir for PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroEnergyModelReservoir","page":"Public API Reference","title":"HydroPowerSimulations.HydroEnergyModelReservoir","text":"Formulation type to add reservoir methods with hydro turbines using only energy inflow/outflow variables (no water flow variables) for PowerSystems.HydroReservoir\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroPumpEnergyDispatch","page":"Public API Reference","title":"HydroPowerSimulations.HydroPumpEnergyDispatch","text":"Formulation type to add injection variables for a HydroPumpTurbine only using energy variables (no water flow variables) PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroTurbineBilinearDispatch","page":"Public API Reference","title":"HydroPowerSimulations.HydroTurbineBilinearDispatch","text":"Formulation type to add injection variables for a HydroTurbine connected to reservoirs using a bilinear model (with water flow variables) PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroTurbineEnergyCommitment","page":"Public API Reference","title":"HydroPowerSimulations.HydroTurbineEnergyCommitment","text":"Formulation type to add injection variables for a PowerSystems.HydroTurbine only using energy variables (no water flow variables) and commitment variables\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroTurbineEnergyDispatch","page":"Public API Reference","title":"HydroPowerSimulations.HydroTurbineEnergyDispatch","text":"Formulation type to add injection variables for a PowerSystems.HydroTurbine only using energy variables (no water flow variables)\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroWaterModelReservoir","page":"Public API Reference","title":"HydroPowerSimulations.HydroWaterModelReservoir","text":"Formulation type to add reservoir methods with hydro turbines using water flow variables for PowerSystems.HydroReservoir\n\n\n\n\n\n","category":"type"},{"location":"api/public/#Variables","page":"Public API Reference","title":"Variables","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.ActivePowerPumpVariable","page":"Public API Reference","title":"HydroPowerSimulations.ActivePowerPumpVariable","text":"Struct to dispatch the creation of a variable for pumped power in a hydro pump turbine (in MWh).\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroEnergyOutput","page":"Public API Reference","title":"HydroPowerSimulations.HydroEnergyOutput","text":"Auxiliary Variable for Hydro Models that solve for total energy output\n\nDocs abbreviation: E^texthyout\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroEnergyShortageVariable","page":"Public API Reference","title":"HydroPowerSimulations.HydroEnergyShortageVariable","text":"Struct to dispatch the creation of a slack variable for energy storage levels < target storage levels\n\nDocs abbreviation: e^textshortage\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroEnergySurplusVariable","page":"Public API Reference","title":"HydroPowerSimulations.HydroEnergySurplusVariable","text":"Struct to dispatch the creation of a slack variable for energy storage levels > target storage levels\n\nDocs abbreviation: e^textsurplus\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroReservoirHeadVariable","page":"Public API Reference","title":"HydroPowerSimulations.HydroReservoirHeadVariable","text":"Aux variable which keeps track of water level (head) of hydro reservoirs (in m)\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroReservoirVolumeVariable","page":"Public API Reference","title":"HydroPowerSimulations.HydroReservoirVolumeVariable","text":"Struct to dispatch the creation of a variable for volume stored in a hydro reservoir (in m3).\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroTurbineFlowRateVariable","page":"Public API Reference","title":"HydroPowerSimulations.HydroTurbineFlowRateVariable","text":"Struct to dispatch the creation of a variable for turbined flow rate (in m3/s).\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.WaterSpillageVariable","page":"Public API Reference","title":"HydroPowerSimulations.WaterSpillageVariable","text":"Struct to dispatch the creation of energy (water) spillage variable representing energy released from a storage/reservoir not injected into the network\n\nDocs abbreviation: s\n\n\n\n\n\n","category":"type"},{"location":"api/public/#Parameters","page":"Public API Reference","title":"Parameters","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.EnergyBudgetTimeSeriesParameter","page":"Public API Reference","title":"HydroPowerSimulations.EnergyBudgetTimeSeriesParameter","text":"Parameter to define energy budget time series for hydro generators\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.EnergyTargetTimeSeriesParameter","page":"Public API Reference","title":"HydroPowerSimulations.EnergyTargetTimeSeriesParameter","text":"Parameter to define energy storage target level time series for hydro generators\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroUsageLimitParameter","page":"Public API Reference","title":"HydroPowerSimulations.HydroUsageLimitParameter","text":"Parameter to define energy usage limit for feedforward\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.InflowTimeSeriesParameter","page":"Public API Reference","title":"HydroPowerSimulations.InflowTimeSeriesParameter","text":"Parameter to define energy inflow to storage or reservoir time series\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.OutflowTimeSeriesParameter","page":"Public API Reference","title":"HydroPowerSimulations.OutflowTimeSeriesParameter","text":"Parameter to define energy outflow from storage or reservoir time series\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirLimitParameter","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirLimitParameter","text":"Parameter to define energy limit for feedforward\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirTargetParameter","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirTargetParameter","text":"Parameter to define energy target for feedforward\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.WaterLevelBudgetParameter","page":"Public API Reference","title":"HydroPowerSimulations.WaterLevelBudgetParameter","text":"Parameter to define water usage budget for feedforward\n\n\n\n\n\n","category":"type"},{"location":"api/public/#Expressions","page":"Public API Reference","title":"Expressions","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.HydroServedReserveDownExpression","page":"Public API Reference","title":"HydroPowerSimulations.HydroServedReserveDownExpression","text":"Expression for PowerSystems.HydroGen that keep track of served reserve down for energy calculations\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.HydroServedReserveUpExpression","page":"Public API Reference","title":"HydroPowerSimulations.HydroServedReserveUpExpression","text":"Expression for PowerSystems.HydroGen that keep track of served reserve up for energy calculations\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalHydroFlowRateReservoirIncoming","page":"Public API Reference","title":"HydroPowerSimulations.TotalHydroFlowRateReservoirIncoming","text":"Expression for PowerSystems.HydroReservoir that keep track of total water flow turbined into a reservoir, from all the upstream turbines connected to it\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalHydroFlowRateReservoirOutgoing","page":"Public API Reference","title":"HydroPowerSimulations.TotalHydroFlowRateReservoirOutgoing","text":"Expression for PowerSystems.HydroReservoir that keep track of total water turbined for a reservoir, from all the downstream turbines connected to it\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalHydroFlowRateTurbineOutgoing","page":"Public API Reference","title":"HydroPowerSimulations.TotalHydroFlowRateTurbineOutgoing","text":"Expression for PowerSystems.HydroGen that keep track of total water turbined for a turbine, coming from multiple reservoirs\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalHydroPowerReservoirIncoming","page":"Public API Reference","title":"HydroPowerSimulations.TotalHydroPowerReservoirIncoming","text":"Expression for `PowerSystems.HydroReservoir that keep track of total power into a reservoir, from all the upstream turbines connected to it\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalHydroPowerReservoirOutgoing","page":"Public API Reference","title":"HydroPowerSimulations.TotalHydroPowerReservoirOutgoing","text":"Expression for `PowerSystems.HydroReservoir that keep track of total power out of a reservoir, from all the downstream turbines connected to it\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalSpillageFlowRateReservoirIncoming","page":"Public API Reference","title":"HydroPowerSimulations.TotalSpillageFlowRateReservoirIncoming","text":"Expression for `PowerSystems.HydroReservoir that keep track of total spillage water flow rate into a reservoir, from all the upstream reservoirs connected to it\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TotalSpillagePowerReservoirIncoming","page":"Public API Reference","title":"HydroPowerSimulations.TotalSpillagePowerReservoirIncoming","text":"Expression for `PowerSystems.HydroReservoir that keep track of total spillage power into a reservoir, from all the upstream reservoirs connected to it\n\n\n\n\n\n","category":"type"},{"location":"api/public/#Constraints","page":"Public API Reference","title":"Constraints","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.ActivePowerPumpReservationConstraint","page":"Public API Reference","title":"HydroPowerSimulations.ActivePowerPumpReservationConstraint","text":"Struct to create the constraint that limits the pump power based on the reservoir variable for hydro pump formulations.\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\np^textpump_t le P^textmaxpump cdot (1 - textReservationVariable_t)\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ActivePowerPumpVariableLimitsConstraint","page":"Public API Reference","title":"HydroPowerSimulations.ActivePowerPumpVariableLimitsConstraint","text":"Struct to create the constraint that limits the pump power  for hydro pump formulations.\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\np^textpump_t le textActivePowerTimeSeriesParameter_t\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.EnergyBudgetConstraint","page":"Public API Reference","title":"HydroPowerSimulations.EnergyBudgetConstraint","text":"Struct to create the constraint that limits the budget for reservoir formulations.\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\nsum_t=1^T p^texthy_t le sum_t=1^T textEnergyBudgetTimeSeriesParameter_t\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.EnergyCapacityTimeSeriesLimitsConstraint","page":"Public API Reference","title":"HydroPowerSimulations.EnergyCapacityTimeSeriesLimitsConstraint","text":"Struct to create the constraint that limits the pump power  for hydro pump formulations.\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\ne^textpump_t le textEnergyCapacityTimeSeriesParameter_t\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.EnergyTargetConstraint","page":"Public API Reference","title":"HydroPowerSimulations.EnergyTargetConstraint","text":"Struct to create the constraint that set-up the target for reservoir formulations.\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\ne_t + e^textshortage + e^textsurplus = textEnergyTargetTimeSeriesParameter_t quad forall t in 1dots T\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.FeedForwardWaterLevelBudgetConstraint","page":"Public API Reference","title":"HydroPowerSimulations.FeedForwardWaterLevelBudgetConstraint","text":"Feedforward constraint to limit the water level budget for reservoir formulations.\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirHeadToVolumeConstraint","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirHeadToVolumeConstraint","text":"Struct to model the transformation from head to volume constraint\n\nv_t = h_t texthead_to_volume\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirInventoryConstraint","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirInventoryConstraint","text":"Struct to create the constraint for hydro reservoir storage\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\n v_t = v_t-1 + Delta t (f^UR_t-1 - f^Sp_t-1 - f^Tu_t-1)\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirLevelLimitConstraint","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirLevelLimitConstraint","text":"Struct to model reservoir stored volume/head limits\n\nh_t^min le h_t le h_t^max\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirLevelTargetConstraint","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirLevelTargetConstraint","text":"Struct to model the final (target) volume/head storage constraint\n\nv_T = V^texttarget\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.TurbinePowerOutputConstraint","page":"Public API Reference","title":"HydroPowerSimulations.TurbinePowerOutputConstraint","text":"Struct to model turbine power output as a function of head\n\np_t = eta rho g h_t f^Tu_t\n\n\n\n\n\n","category":"type"},{"location":"api/public/#Initial-Conditions","page":"Public API Reference","title":"Initial Conditions","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.InitialReservoirVolume","page":"Public API Reference","title":"HydroPowerSimulations.InitialReservoirVolume","text":"Initial condition for volume in reservoir in PowerSystems.HydroReservoir formulations\n\n\n\n\n\n","category":"type"},{"location":"api/public/#Feedforwards","page":"Public API Reference","title":"Feedforwards","text":"","category":"section"},{"location":"api/public/#HydroPowerSimulations.HydroUsageLimitFeedforward","page":"Public API Reference","title":"HydroPowerSimulations.HydroUsageLimitFeedforward","text":"HydroUsageLimitFeedforward(\n    component_type::Type{<:PowerSystems.Component},\n    source::Type{T},\n    affected_values::Vector{DataType},\n    meta = CONTAINER_KEY_EMPTY_META\n) where {T}\n\nAdds a constraint to enforce a maximum usage of hydro energy based on the source value. It is recommended to use the Auxiliary Variable HydroEnergyOutput as Source, affecting the HydroUsageLimitParameter.\n\nArguments:\n\ncomponent_type::Type{<:PowerSystems.Component} : Specify the type of component on which the Feedforward will be applied\nsource::Type{T} : Specify the VariableType, ParameterType or AuxVariableType as the source of values for the Feedforward\naffected_values::Vector{DataType} : Specify the variable on which the hydro limit will be applied using the source values\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirLimitFeedforward","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirLimitFeedforward","text":"ReservoirLimitFeedforward(\n    component_type::Type{<:PSY.Component},\n    source::Type{T},\n    affected_values::Vector{DataType},\n    number_of_periods::Int,\n    meta = CONTAINER_KEY_EMPTY_META\n) where {T}\n\nAdds a constraint to limit the sum of a variable over the number of periods to the source value.\n\nArguments:\n\ncomponent_type::Type{<:PowerSystems.Component} : Specify the type of component on which the Feedforward will be applied\nsource::Type{T} : Specify the VariableType, ParameterType or AuxVariableType as the source of values for the Feedforward\naffected_values::Vector{DataType} : Specify the variable on which the reservoir limit will be applied using the source values\nnumber_of_periods::Int : Specify the total number of periods that are added on which the limits are applied. For example, in a 24-step simulation if number_of_periods = 24, it will add only one constraint over the sum of 24 periods on which the reservoir limit will be applied. If number_of_periods = 12, it will create two constraints, one for the first 12 steps and one for the 13:24 steps. It is mandatory that number_of_periods can divide the total number of simulation steps.\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.ReservoirTargetFeedforward","page":"Public API Reference","title":"HydroPowerSimulations.ReservoirTargetFeedforward","text":"ReservoirTargetFeedforward(\n    component_type::Type{<:PowerSystems.Component},\n    source::Type{T},\n    affected_values::Vector{DataType},\n    target_period::Int,\n    penalty_cost::Float64,\n    meta = CONTAINER_KEY_EMPTY_META\n) where {T}\n\nAdds a constraint to enforce a minimum reservoir level target with a slack variable associated with a penalty term.\n\nArguments:\n\ncomponent_type::Type{<:PowerSystems.Component} : Specify the type of component on which the Feedforward will be applied\nsource::Type{T} : Specify the VariableType, ParameterType or AuxVariableType as the source of values for the Feedforward\naffected_values::Vector{DataType} : Specify the variable on which the reservoir target will be applied using the source values\ntarget_period::Int : Specify the time step at which the reservoir target will be applied.\npenalty_cost::Float64 : Specify the penalty cost for not reaching the desired reservoir target.\n\n\n\n\n\n","category":"type"},{"location":"api/public/#HydroPowerSimulations.WaterLevelBudgetFeedforward","page":"Public API Reference","title":"HydroPowerSimulations.WaterLevelBudgetFeedforward","text":"WaterLevelBudgetFeedforward(\n    component_type::Type{<:PowerSystems.Component},\n    source::Type{T},\n    affected_values::Vector{DataType},\n    meta = CONTAINER_KEY_EMPTY_META\n) where {T}\n\nAdds a constraint to enforce a maximum usage of hydro level volume based on the source value. It is recommended to use the Auxiliary Variable TotalHydroFlowRateReservoirOutgoing as Source, affecting the WaterLevelBudgetParameter.\n\nArguments:\n\ncomponent_type::Type{<:PowerSystems.Component} : Specify the type of component on which the Feedforward will be applied\nsource::Type{T} : Specify the VariableType, ParameterType or AuxVariableType as the source of values for the Feedforward\naffected_values::Vector{DataType} : Specify the variable on which the hydro limit will be applied using the source values\n\n\n\n\n\n","category":"type"},{"location":"tutorials/hydro_pump_turbine/#HydroPumpTurbine-with-Energy-Model","page":"Hydro Pump Turbine Operation","title":"HydroPumpTurbine with Energy Model","text":"","category":"section"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"note: Note\nHydroPowerSimulations.jl is an extension library of PowerSimulations.jl for modeling hydro units. Users are encouraged to review the single-step tutorial in PowerSimulations.jl before this tutorial.","category":"page"},{"location":"tutorials/hydro_pump_turbine/#Load-packages","page":"Hydro Pump Turbine Operation","title":"Load packages","text":"","category":"section"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"using PowerSystems\nusing PowerSimulations\nusing HydroPowerSimulations\nusing PowerSystemCaseBuilder\nusing HiGHS # solver","category":"page"},{"location":"tutorials/hydro_pump_turbine/#Data","page":"Hydro Pump Turbine Operation","title":"Data","text":"","category":"section"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"note: Note\nPowerSystemCaseBuilder.jl is a helper library that makes it easier to reproduce examples in the documentation and tutorials. Normally you would pass your local files to create the system data instead of calling the function build_system. For more details visit PowerSystemCaseBuilder README","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"sys = build_system(PSITestSystems, \"c_sys5_hydro_pump_energy\")","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"With a single PowerSystems.HydroPumpTurbine connected to two PowerSystems.HydroReservoir (head and tail reservoirs of the turbine):","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"hy = only(get_components(HydroTurbine, sys))","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"res_head = get_component(HydroReservoir, sys, \"Bat_head_reservoir\")\nres_tail = get_component(HydroReservoir, sys, \"Bat_tail_reservoir\")","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"Note that the reservoirs has a level_data_type of ENERGY, that implies its storage level limits data are in MWh. That means that the available capacity of the head reservoir is between 5.0 and 400 MWh, while the tail reservoir is set to zero, implying an infinite tail reservoir.","category":"page"},{"location":"tutorials/hydro_pump_turbine/#Decision-Model","page":"Hydro Pump Turbine Operation","title":"Decision Model","text":"","category":"section"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"Setting up the formulations based on PowerSimulations.jl:","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"template = ProblemTemplate(PTDFPowerModel)\nset_device_model!(template, ThermalStandard, ThermalBasicDispatch)\nset_device_model!(template, PowerLoad, StaticPowerLoad)\nset_device_model!(template, Line, StaticBranch)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"but, now we also include the HydroTurbine using HydroPumpEnergyDispatch:","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"pump_model = DeviceModel(\n    HydroPumpTurbine,\n    HydroPumpEnergyDispatch;\n    attributes = Dict{String, Any}(\n        \"reservation\" => true,\n        \"energy_target\" => false,\n    ),\n    time_series_names = Dict(),\n)\nset_device_model!(template, pump_model)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"The HydroPumpEnergyDispatch(@ref) is a closed model for turbine and must be connected to independent reservoirs (not connected with other HydroTurbine). For that reason it is not needed to include a model of HydroEnergyModelReservoir. When the attribute reservation is set-up to true it does not allow to simultaneously use the pump and turbine, forcing one of those variables to zero. The energy_target attributes allow to include a final target for the head reservoir based on its level_targets field.","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"In addition, the time_series_names is set-up to an empty dictionary. By default, the HydroPumpEnergyDispatch(@ref) model allows to include limits on the capacity and max_active_power at each time step if the user need it by properly setting up those time series (similar to a HydroDispatchRunOfRiver model)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"time_series_names = Dict(\n    ActivePowerTimeSeriesParameter => \"max_active_power\",\n    EnergyCapacityTimeSeriesParameter => \"capacity\",\n)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"With the template properly set-up, we construct, build and solve the optimization problem:","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"model = DecisionModel(template, sys; optimizer = HiGHS.Optimizer)\nbuild!(model; output_dir = mktempdir())\nsolve!(model)","category":"page"},{"location":"tutorials/hydro_pump_turbine/#Exploring-Results","page":"Hydro Pump Turbine Operation","title":"Exploring Results","text":"","category":"section"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"Results can be explored using:","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"res = OptimizationProblemResults(model)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"Use read_variable to read in the dispatch variable results for the hydro:","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"var = read_variable(\n    res,\n    \"ActivePowerVariable__HydroPumpTurbine\";\n    table_format = TableFormat.WIDE,\n)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"its pump usage","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"var = read_variable(\n    res,\n    \"ActivePowerPumpVariable__HydroPumpTurbine\";\n    table_format = TableFormat.WIDE,\n)","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"and stored energy:","category":"page"},{"location":"tutorials/hydro_pump_turbine/","page":"Hydro Pump Turbine Operation","title":"Hydro Pump Turbine Operation","text":"var =\n    read_variable(res, \"EnergyVariable__HydroPumpTurbine\"; table_format = TableFormat.WIDE)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/#HydroTurbine-Reservoir-for-WaterModel","page":"Water Hydro Reservoir Operation","title":"HydroTurbine + Reservoir for WaterModel","text":"","category":"section"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"note: Note\nHydroPowerSimulations.jl is an extension library of PowerSimulations.jl for modeling hydro units. Users are encouraged to review the single-step tutorial in PowerSimulations.jl before this tutorial.","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/#Load-packages","page":"Water Hydro Reservoir Operation","title":"Load packages","text":"","category":"section"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"using PowerSystems\nusing PowerSimulations\nusing HydroPowerSimulations\nusing PowerSystemCaseBuilder\nusing Ipopt # solver","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/#Data","page":"Water Hydro Reservoir Operation","title":"Data","text":"","category":"section"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"note: Note\nPowerSystemCaseBuilder.jl is a helper library that makes it easier to reproduce examples in the documentation and tutorials. Normally you would pass your local files to create the system data instead of calling the function build_system. For more details visit PowerSystemCaseBuilder README","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"sys = build_system(PSITestSystems, \"c_sys5_hy_turbine_head\")","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"With a single PowerSystems.HydroTurbine connected downstream to a PowerSystems.HydroReservoir:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"hy = only(get_components(HydroTurbine, sys))","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"res = only(get_components(HydroReservoir, sys))","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"Note that the reservoir has a level_data_type of HEAD, that implies its storage level limits data are in meters (above the sea level) and refer to the hydraulic head levels. That means that its available capacity lies with its hydraulic head being within 463.5 and 555.5 meters, and its intake elevation is at 463.3 meters. In addition note that the elevation of the turbine is on 317.12 meters above the sea level.","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/#Decision-Model","page":"Water Hydro Reservoir Operation","title":"Decision Model","text":"","category":"section"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"Setting up the formulations based on PowerSimulations.jl:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"template = ProblemTemplate(PTDFPowerModel)\nset_device_model!(template, ThermalStandard, ThermalBasicDispatch)\nset_device_model!(template, PowerLoad, StaticPowerLoad)\nset_device_model!(template, Line, StaticBranch)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"but, now we also include the HydroTurbine using HydroTurbineBilinearDispatch:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"set_device_model!(template, HydroTurbine, HydroTurbineBilinearDispatch)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"This is a nonlinear model that to compute its output power requires the bilinear term head times water flow. For that purpose the non-convex Ipopt solver will be used to solve this problem.","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"In addition, we need to use the water model for the HydroReservoir via HydroWaterModelReservoir.","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"set_device_model!(template, HydroReservoir, HydroWaterModelReservoir)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"With the template properly set-up, we construct, build and solve the optimization problem:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"model = DecisionModel(template, sys; optimizer = Ipopt.Optimizer)\nbuild!(model; output_dir = mktempdir())\nsolve!(model)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/#Exploring-Results","page":"Water Hydro Reservoir Operation","title":"Exploring Results","text":"","category":"section"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"Results can be explored using:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"res = OptimizationProblemResults(model)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"Use read_variable to read in the dispatch variable results for the hydro:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"var =\n    read_variable(res, \"ActivePowerVariable__HydroTurbine\"; table_format = TableFormat.WIDE)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"or the water flowing through the turbine (in m/s):","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"var = read_expression(\n    res,\n    \"TotalHydroFlowRateTurbineOutgoing__HydroTurbine\";\n    table_format = TableFormat.WIDE,\n)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"and the head level of the reservoir:","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"hydraulic_head = read_variable(\n    res,\n    \"HydroReservoirHeadVariable__HydroReservoir\";\n    table_format = TableFormat.WIDE,\n)","category":"page"},{"location":"tutorials/water_model_hydroturbine_reservoir/","page":"Water Hydro Reservoir Operation","title":"Water Hydro Reservoir Operation","text":"Note that since the water outflow limit of the turbine is limited on 30 m/s, the optimal solution decides to flow as much water as possible producing power around 190 MW with that flow and hydraulic head.","category":"page"},{"location":"how_to/format_input_data/#format_data","page":"...format input data for Hydro models","title":"Format input data for different turbine and reservoir models","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Many formulations require to properly specify the data models appropriately to be used correctly in the different available formulations","category":"page"},{"location":"how_to/format_input_data/#Turbine-Data","page":"...format input data for Hydro models","title":"Turbine Data","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Docstring provide good information on how to include data for turbines.","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"using PowerSystems\n@doc HydroTurbine","category":"page"},{"location":"how_to/format_input_data/#Energy-Models","page":"...format input data for Hydro models","title":"Energy Models","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Energy models are characterized by their data is specified in power units (MW and per-unit) and energy units (MWh and per-unit-h). For turbines this is usually set-up with providing data in per-unit dependent on its base_power. powerhouse_elevation and outflow_limits are only relevant for water models.","category":"page"},{"location":"how_to/format_input_data/#TimeSeries-data","page":"...format input data for Hydro models","title":"TimeSeries data","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Energy models for turbine such as HydroTurbineEnergyDispatch and HydroTurbineEnergyCommitment do not require time series input data.","category":"page"},{"location":"how_to/format_input_data/#Water-Models","page":"...format input data for Hydro models","title":"Water Models","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Water models still have their data specified in power units, but the powerhouse_elevation must be specified in meters, and outflow_limits specified in m/s, bounds the water flowing through the turbine.","category":"page"},{"location":"how_to/format_input_data/#TimeSeries-data-2","page":"...format input data for Hydro models","title":"TimeSeries data","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"HydroTurbineBilinearDispatch and HydroEnergyBlockOptimization models for turbine do not require time series input data.","category":"page"},{"location":"how_to/format_input_data/#Reservoir-Data","page":"...format input data for Hydro models","title":"Reservoir Data","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Docstring provide good information on how to include data for reservoirs.","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"using PowerSystems\n@doc HydroReservoir","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"Reservoir store which turbines are upstream and downstream via their upstream_turbines and downstream_turbines field.","category":"page"},{"location":"how_to/format_input_data/#Energy-Models-2","page":"...format input data for Hydro models","title":"Energy Models","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"To specify a reservoir to use data in energy format, on which their inflows/outflows are in MW, and their capacity is in MWh, the user must specify the level_data_type = ReservoirDataType.ENERGY. The field storage_level_limits must be added in MWh, while the inflow/outflow should be specified in system base per-unit. For example if the system base is 100 MW, and the inflow is 400 MW, then set_inflow!(reservoir, 4.0) will be set correctly the multiplier for the inflow timeseries.","category":"page"},{"location":"how_to/format_input_data/#Timeseries-data","page":"...format input data for Hydro models","title":"Timeseries data","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"The HydroEnergyModelReservoir can set-up three different timeseries:","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"The inflow timeseries is used as a fraction of the inflow field to add energy into the reservoir storage at every time step. The term textinflow cdot textinflowTimeSeries_t cdot textresolution in hours cdot textsystem basepower represents how much MWh are added per time to the reservoir storage.\nThe storage_target timeseries is used as a fraction of the level_targets  storage_level_limits.max to include a target at any specified hour. The user must provide a timeseries for every hour, but the constraint is only generated for the last time step of the decision model.\nThe hydro_budget timeseries is used as a fraction of the storage_level_limits.max to specify an hourly energy budget at any specified hour. The user must provide a timeseries for every hour, but a single constraint is generated for the sum of all time steps of the decision model.","category":"page"},{"location":"how_to/format_input_data/#Water-Models-2","page":"...format input data for Hydro models","title":"Water Models","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"To specify a reservoir data in water format, on which their inflows/outflows are in m/s, the user must must specify the level_data_type as the following options:","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"ReservoirDataType.HEAD if the data is provided for the hydraulic head in meters. The storage_level_limits must specify the minimum and maximum hydraulic head in meters above the sea level. The intake_elevation must be specified in meters, and the head_to_volume_factor must be specified to transform the head into the effective available volume for the reservoir in m.\nReservoirDataType.USABLE_VOLUME if the data is provided in usable volume in cubic meters. The storage_level_limits must specify the minimum and maximum effective volume of the reservoir in cubic meters. Typically the usable volume is relative to the minimum allowed volume in the reservoir, such that that total volume is represented as a zero usable volume. The intake_elevation must be specified in meters, and the head_to_volume_factor must be specified to transform the effective usable volume for the reservoir in m into the absolute hydraulic head in meters.\nReservoirDataType.TOTAL_VOLUME if the data is provided in usable volume in cubic meters. The storage_level_limits must specify the minimum and maximum  volume of the reservoir in cubic meters. The total volume must specify the minimum volume in cubic meters for operation. The intake_elevation must be specified in meters, and the head_to_volume_factor must be specified to transform the total volume for the reservoir in m into the absolute hydraulic head in meters.","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"The inflow and outflow fields are not necessary to be specified since the mandatory timeseries data must be specified in m/s.","category":"page"},{"location":"how_to/format_input_data/#Timeseries-data-2","page":"...format input data for Hydro models","title":"Timeseries data","text":"","category":"section"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"As mentioned, the HydroWaterModelReservoir must set-up two different timeseries:","category":"page"},{"location":"how_to/format_input_data/","page":"...format input data for Hydro models","title":"...format input data for Hydro models","text":"The inflow timeseries is added in average m/s external water inflow. The term textinflowTimeSeries_t cdot textresolution in hours cdot textSeconds in 1 hour represents how much m are added per time to the reservoir storage.\nThe inflow timeseries is added in average m/s external water outflow. The term textoutflowTimeSeries_t cdot textresolution in hours cdot textSeconds in 1 hour represents how much m is lost per time to the reservoir storage. It is typically used to represent evaporation or filtration losses.","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/#HydroTurbine-Reservoir-for-EnergyModel","page":"Energy Hydro Reservoir Operation","title":"HydroTurbine + Reservoir for EnergyModel","text":"","category":"section"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"note: Note\nHydroPowerSimulations.jl is an extension library of PowerSimulations.jl for modeling hydro units. Users are encouraged to review the single-step tutorial in PowerSimulations.jl before this tutorial.","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/#Load-packages","page":"Energy Hydro Reservoir Operation","title":"Load packages","text":"","category":"section"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"using PowerSystems\nusing PowerSimulations\nusing HydroPowerSimulations\nusing PowerSystemCaseBuilder\nusing HiGHS # solver","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/#Data","page":"Energy Hydro Reservoir Operation","title":"Data","text":"","category":"section"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"note: Note\nPowerSystemCaseBuilder.jl is a helper library that makes it easier to reproduce examples in the documentation and tutorials. Normally you would pass your local files to create the system data instead of calling the function build_system. For more details visit PowerSystemCaseBuilder README","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"sys = build_system(PSITestSystems, \"c_sys5_hy_turbine_energy\")","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"With a single PowerSystems.HydroTurbine connected downstream to a PowerSystems.HydroReservoir:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"hy = only(get_components(HydroTurbine, sys))","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"res = only(get_components(HydroReservoir, sys))","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"Note that the reservoir has a level_data_type of ENERGY, that implies its storage level limits data are in MWh. That means that its maximum capacity is 5000 MWh, and its initial energy capacity is 05 cdot 5000 = 2500 MWh.","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/#Decision-Model","page":"Energy Hydro Reservoir Operation","title":"Decision Model","text":"","category":"section"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"Setting up the formulations based on PowerSimulations.jl:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"template = ProblemTemplate(PTDFPowerModel)\nset_device_model!(template, ThermalStandard, ThermalBasicDispatch)\nset_device_model!(template, PowerLoad, StaticPowerLoad)\nset_device_model!(template, Line, StaticBranch)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"but, now we also include the HydroTurbine using HydroTurbineEnergyDispatch:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"set_device_model!(template, HydroTurbine, HydroTurbineEnergyDispatch)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"and we need to use the energy model for the HydroReservoir via HydroEnergyModelReservoir. For this example we will ignore end targets of hydro budgets, but they can be included by setting up the attributes to true. It is not recommended to set both energy_target and hydro_budget to true simultaneously since it may create an infeasible problem:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"reservoir_model = DeviceModel(\n    HydroReservoir,\n    HydroEnergyModelReservoir;\n    attributes = Dict{String, Any}(\n        \"energy_target\" => false,\n        \"hydro_budget\" => false,\n    ),\n)\nset_device_model!(template, reservoir_model)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"With the template properly set-up, we construct, build and solve the optimization problem:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"model = DecisionModel(template, sys; optimizer = HiGHS.Optimizer)\nbuild!(model; output_dir = mktempdir())\nsolve!(model)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/#Exploring-Results","page":"Energy Hydro Reservoir Operation","title":"Exploring Results","text":"","category":"section"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"Results can be explored using:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"res = OptimizationProblemResults(model)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"Use read_variable to read in the dispatch variable results for the hydro:","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"var =\n    read_variable(res, \"ActivePowerVariable__HydroTurbine\"; table_format = TableFormat.WIDE)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"or the energy capacity of the reservoir","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"energy =\n    read_variable(res, \"EnergyVariable__HydroReservoir\"; table_format = TableFormat.WIDE)","category":"page"},{"location":"tutorials/energy_model_hydroturbine_reservoir/","page":"Energy Hydro Reservoir Operation","title":"Energy Hydro Reservoir Operation","text":"Note that since we have ignored the energy targets in the reservoir model, the optimal solution decides to deplete the reservoir.","category":"page"},{"location":"tutorials/single_stage_model/#op_problem","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation Problem with HydroPowerSimulations.jl","text":"","category":"section"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"note: Note\nHydroPowerSimulations.jl is an extension library of PowerSimulations.jl for modeling hydro units. Users are encouraged to review the single-step tutorial in PowerSimulations.jl before this tutorial.","category":"page"},{"location":"tutorials/single_stage_model/#Load-packages","page":"Operation problem with HydroDispatchRunOfRiver","title":"Load packages","text":"","category":"section"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"using PowerSystems\nusing PowerSimulations\nusing HydroPowerSimulations\nusing PowerSystemCaseBuilder\nusing HiGHS # solver","category":"page"},{"location":"tutorials/single_stage_model/#Data","page":"Operation problem with HydroDispatchRunOfRiver","title":"Data","text":"","category":"section"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"note: Note\nPowerSystemCaseBuilder.jl is a helper library that makes it easier to reproduce examples in the documentation and tutorials. Normally you would pass your local files to create the system data instead of calling the function build_system. For more details visit PowerSystemCaseBuilder README","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"sys = build_system(PSITestSystems, \"c_sys5_hy\")","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"With a single PowerSystems.HydroDispatch:","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"hy = only(get_components(HydroDispatch, sys))","category":"page"},{"location":"tutorials/single_stage_model/#Decision-Model","page":"Operation problem with HydroDispatchRunOfRiver","title":"Decision Model","text":"","category":"section"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"Setting up the formulations based on PowerSimulations.jl:","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"template = ProblemTemplate(PTDFPowerModel)\nset_device_model!(template, ThermalStandard, ThermalBasicDispatch)\nset_device_model!(template, PowerLoad, StaticPowerLoad)\nset_device_model!(template, Line, StaticBranch)","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"but, now we also include the hydro using HydroDispatchRunOfRiver:","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"set_device_model!(template, HydroDispatch, HydroDispatchRunOfRiver)","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"With the template properly set-up, we construct, build and solve the optimization problem:","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"model = DecisionModel(template, sys; optimizer = HiGHS.Optimizer)\nbuild!(model; output_dir = mktempdir())\nsolve!(model)","category":"page"},{"location":"tutorials/single_stage_model/#Exploring-Results","page":"Operation problem with HydroDispatchRunOfRiver","title":"Exploring Results","text":"","category":"section"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"Results can be explored using:","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"res = OptimizationProblemResults(model)","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"Use read_variable to read in the dispatch variable results for the hydro:","category":"page"},{"location":"tutorials/single_stage_model/","page":"Operation problem with HydroDispatchRunOfRiver","title":"Operation problem with HydroDispatchRunOfRiver","text":"var = read_variable(res, \"ActivePowerVariable__HydroDispatch\")","category":"page"},{"location":"api/internal/#Internal-API","page":"Internal API Reference","title":"Internal API","text":"","category":"section"},{"location":"api/internal/#HydroPowerSimulations.EnergyBalanceExpression","page":"Internal API Reference","title":"HydroPowerSimulations.EnergyBalanceExpression","text":"Expression for PowerSystems.System that keep track of the energy balance for the system in medium term planning\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.EnergyCapacityTimeSeriesParameter","page":"Internal API Reference","title":"HydroPowerSimulations.EnergyCapacityTimeSeriesParameter","text":"Parameter to define energy capacity limits for hydro pump-turbine time series\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.FeedForwardHydroUsageLimitConstraint","page":"Internal API Reference","title":"HydroPowerSimulations.FeedForwardHydroUsageLimitConstraint","text":"Struct to create the constraint that limits the hydro usage for hydro formulations.\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\nsum_t=1^T E^texthy_t le  textHydroUsageLimitParameter_T\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.HydroPowerConstraint","page":"Internal API Reference","title":"HydroPowerSimulations.HydroPowerConstraint","text":"Struct to model turbine outflow limits\n\nFor more information check HydroPowerSimulations Formulations.\n\nThe specified constraint is formulated as:\n\n p_t = Delta t (f^Tu_t-1(05 K_1 (v_t + v_t-1) + K_2))\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.HydroTurbineWaterLinearDispatch","page":"Internal API Reference","title":"HydroPowerSimulations.HydroTurbineWaterLinearDispatch","text":"Formulation type to add injection variables for a HydroTurbine connected to reservoirs using a linear model (with water flow variables and constant head) PowerSystems.HydroGen\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.LevelTargetFeedforward","page":"Internal API Reference","title":"HydroPowerSimulations.LevelTargetFeedforward","text":"LevelTargetFeedforward(\n    component_type::Type{<:PowerSystems.Component},\n    source::Type{T},\n    affected_values::Vector{DataType},\n    meta = CONTAINER_KEY_EMPTY_META\n) where {T}\n\nAdds a constraint to enforce a minimum level (head or volume) for reservoirs based on the source value. It is recommended to use the Volume or Head variable as Source, affecting the LevelTargetParameter.\n\nArguments:\n\ncomponent_type::Type{<:PowerSystems.Component} : Specify the type of component on which the Feedforward will be applied\nsource::Type{T} : Specify the VariableType, ParameterType or AuxVariableType as the source of values for the Feedforward\naffected_values::Vector{DataType} : Specify the variable on which the hydro limit will be applied using the source values\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.LevelTargetParameter","page":"Internal API Reference","title":"HydroPowerSimulations.LevelTargetParameter","text":"Parameter to define the level target for feedforward\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#HydroPowerSimulations.TurbineFlowLimitConstraint","page":"Internal API Reference","title":"HydroPowerSimulations.TurbineFlowLimitConstraint","text":"Struct to limit the turbine flow\n\nQW^min le sum_j in J(i)^T wq_jt le  QW^max\n\n\n\n\n\n","category":"type"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{PowerSimulations.OptimizationContainer, Type{HydroPowerSimulations.EnergyBalanceExpression}, Type{PowerSimulations.EnergyBalanceConstraint}, PowerSimulations.NetworkModel{X}}} where X<:PowerModels.AbstractPowerModel","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraints for the energy balance in a medium term planning problem.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{HydroPowerSimulations.HydroPowerConstraint}, InfrastructureSystems.FlattenIteratorWrapper{PowerSystems.HydroTurbine}, PowerSimulations.DeviceModel{PowerSystems.HydroTurbine, W}, PowerSimulations.NetworkModel{X}}} where {W<:HydroPowerSimulations.AbstractHydroReservoirFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraint for the hydro power generation for the HydroEnergyBlockOptimization.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{EnergyBudgetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroEnergyModelReservoir, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the budget constraint for the active power budget formulation. sum(Pt) = Budget\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{EnergyTargetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroPumpTurbine, W<:HydroPumpEnergyDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add energy target constraints for PowerSystems.HydroPumpTurbine\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{PowerSimulations.EnergyBalanceConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroEnergyModelReservoir, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraints for the energy level for the PowerSystems.HydroReservoir using the HydroEnergyModelReservoir formulation.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{ReservoirInventoryConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroEnergyBlockOptimization, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraints for the water level (or state of charge) for the HydroEnergyBlockOptimization.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{TurbinePowerOutputConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroTurbine, W<:HydroPowerSimulations.AbstractHydroFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the relationship between turbined flow and power produced\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, Type{TurbinePowerOutputConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroTurbine, W<:HydroPowerSimulations.HydroTurbineWaterLinearDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the relationship between turbined flow and power produced with constant head\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{<:PowerSimulations.PowerVariableLimitsConstraint}, Type{<:Union{InfrastructureSystems.Optimization.ExpressionType, InfrastructureSystems.Optimization.VariableType}}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroGen, W<:HydroPowerSimulations.AbstractHydroDispatchFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add power variable limits constraints for abstract hydro dispatch formulations\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{<:PowerSimulations.PowerVariableLimitsConstraint}, Type{<:Union{InfrastructureSystems.Optimization.ExpressionType, InfrastructureSystems.Optimization.VariableType}}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroGen, W<:HydroPowerSimulations.AbstractHydroUnitCommitment, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add power variable limits constraints for abstract hydro unit commitment formulations\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{<:Union{ActivePowerPumpVariableLimitsConstraint, EnergyCapacityTimeSeriesLimitsConstraint}}, Type{<:Union{ActivePowerPumpVariable, PowerSimulations.EnergyVariable}}, Type{<:Union{HydroPowerSimulations.EnergyCapacityTimeSeriesParameter, PowerSimulations.ActivePowerTimeSeriesParameter}}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroPumpTurbine, W<:HydroPumpEnergyDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraints for the timeseries bounds for the ActivePowerPumpVariable for the PowerSystems.HydroPumpTurbine.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{ActivePowerPumpReservationConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroPumpTurbine, W<:HydroPumpEnergyDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraints for the energy level for the PowerSystems.HydroPumpTurbine.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{EnergyBudgetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroGen, W<:HydroPowerSimulations.AbstractHydroDispatchFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the budget constraint for the active power budget formulation. sum(Pt) = Budget\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{EnergyTargetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroGen, W<:HydroPowerSimulations.AbstractHydroReservoirFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add energy target constraints for PowerSystems.HydroGen\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{EnergyTargetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroEnergyModelReservoir, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add energy target constraints for PowerSystems.HydroReservoir\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{PowerSimulations.ActivePowerVariableLimitsConstraint}, Type{<:PowerSimulations.RangeConstraintLBExpressions}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroPumpTurbine, W<:HydroPumpEnergyDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add semicontinuous LB range constraints for HydroPumpEnergyDispatch formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{PowerSimulations.ActivePowerVariableLimitsConstraint}, Type{<:PowerSimulations.RangeConstraintUBExpressions}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroPumpTurbine, W<:HydroPumpEnergyDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add semicontinuous UB range constraints for HydroPumpEnergyDispatch formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{PowerSimulations.ActivePowerVariableLimitsConstraint}, Type{<:Union{InfrastructureSystems.Optimization.ExpressionType, InfrastructureSystems.Optimization.VariableType}}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroGen, W<:Union{HydroDispatchRunOfRiver, HydroDispatchRunOfRiverBudget}, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Time series constraints\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{PowerSimulations.ActivePowerVariableLimitsConstraint}, Type{<:Union{InfrastructureSystems.Optimization.VariableType, var\"#s5\"} where var\"#s5\"<:PowerSimulations.RangeConstraintLBExpressions}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroGen, W<:HydroCommitmentRunOfRiver, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"Add semicontinuous range constraints for HydroCommitmentRunOfRiver formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{PowerSimulations.EnergyBalanceConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroPumpTurbine, W<:HydroPumpEnergyDispatch, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function defines the constraints for the energy level for the PowerSystems.HydroPumpTurbine.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{ReservoirHeadToVolumeConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroPowerSimulations.AbstractHydroFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the relationship between head and volume for the reservoir.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{ReservoirInventoryConstraint}, Type{HydroReservoirVolumeVariable}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroPowerSimulations.AbstractHydroFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the level (head or volume) limits for the reservoir.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{ReservoirLevelLimitConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroPowerSimulations.AbstractHydroFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the level (head or volume) limits for the reservoir.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{ReservoirLevelTargetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroEnergyBlockOptimization, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the target level constraint for the reservoir.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_constraints!-Union{Tuple{X}, Tuple{W}, Tuple{V}, Tuple{PowerSimulations.OptimizationContainer, Type{ReservoirLevelTargetConstraint}, InfrastructureSystems.FlattenIteratorWrapper{V}, PowerSimulations.DeviceModel{V, W}, PowerSimulations.NetworkModel{X}}} where {V<:PowerSystems.HydroReservoir, W<:HydroPowerSimulations.AbstractHydroFormulation, X<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.add_constraints!","text":"This function define the target level constraint for the reservoir.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_feedforward_constraints!-Union{Tuple{T}, Tuple{PowerSimulations.OptimizationContainer, PowerSimulations.DeviceModel, InfrastructureSystems.FlattenIteratorWrapper{T}, ReservoirLimitFeedforward}} where T<:PowerSystems.Component","page":"Internal API Reference","title":"PowerSimulations.add_feedforward_constraints!","text":"    add_feedforward_constraints(container::PSI.OptimizationContainer,\n                    model::PSI.DeviceModel,\n                    devices,\n                    ff::ReservoirLimitFeedforward)\n\nConstructs a parameterized integral limit constraint to implement feedforward from other models. The Parameters are initialized using the upper boundary values of the provided variables.\n\nsum(variable[var_name, t] for t in 1:affected_periods)/affected_periods <= param_reference[var_name]\n\nLaTeX\n\nsum_t x leq param^max\n\nArguments\n\ncontainer::PowerSimulations.OptimizationContainer : the optimization_container model built in PowerSimulations\nmodel::PowerSimulations.DeviceModel : the device model\ndevices::IS.FlattenIteratorWrapper{T} : list of devices\nff::ReservoirLimitFeedforward : a instance of the Reservoir Limit Feedforward\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.add_feedforward_constraints!-Union{Tuple{U}, Tuple{T}, Tuple{PowerSimulations.OptimizationContainer, PowerSimulations.DeviceModel{T, U}, InfrastructureSystems.FlattenIteratorWrapper{T}, ReservoirTargetFeedforward}} where {T<:PowerSystems.HydroGen, U<:HydroPowerSimulations.AbstractHydroFormulation}","page":"Internal API Reference","title":"PowerSimulations.add_feedforward_constraints!","text":"    add_feedforward_constraints(\n        container::PSI.OptimizationContainer,\n        ::PSI.DeviceModel,\n        devices::IS.FlattenIteratorWrapper{T},\n        ff::ReservoirTargetFeedforward,\n    ) where {T <: PSY.Component}\n\nConstructs a equality constraint to a fix a variable in one model using the variable value from other model results.\n\nvariable[var_name, t] + slack[var_name, t] >= param[var_name, t]\n\nLaTeX\n\nx + slack = param\n\nArguments\n\ncontainer::PSI.OptimizationContainer : the optimization_container model built in PowerSimulations\nmodel::PowerSimulations.DeviceModel : the device model\ndevices::IS.FlattenIteratorWrapper{T} : list of devices\nff::ReservoirTargetFeedforward : a instance of the ReservoirTarget Feedforward\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, D<:HydroCommitmentRunOfRiver, S<:PowerModels.AbstractActivePowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen with HydroCommitmentRunOfRiver Formulation with only Active Power.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, D<:HydroCommitmentRunOfRiver, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen with HydroCommitmentRunOfRiver Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, D<:HydroDispatchRunOfRiverBudget, S<:PowerModels.AbstractActivePowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen with HydroDispatchRunOfRiverBudget Formulation with only Active Power.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, D<:HydroDispatchRunOfRiverBudget, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen with HydroDispatchRunOfRiverBudget Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, D<:HydroPowerSimulations.AbstractHydroDispatchFormulation, S<:PowerModels.AbstractActivePowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen with HydroDispatchRunOfRiver Formulation with only Active Power.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, D<:HydroPowerSimulations.AbstractHydroDispatchFormulation, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen with HydroDispatchRunOfRiver Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroReservoir, D<:HydroEnergyModelReservoir, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroReservoir with HydroEnergyModelReservoir Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroTurbine, D<:HydroEnergyBlockOptimization, S<:PowerModels.AbstractActivePowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroTurbine with HydroEnergyBlockOptimization Formulation with only Active Power.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroTurbine, D<:HydroTurbineEnergyCommitment, S<:PowerModels.AbstractActivePowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroTurbine with HydroTurbineEnergyCommitment Formulation with only Active Power.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroTurbine, D<:HydroTurbineEnergyCommitment, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroTurbine with HydroTurbineEnergyCommitment Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroTurbine, D<:HydroTurbineEnergyDispatch, S<:PowerModels.AbstractActivePowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroTurbine with HydroTurbineEnergyDispatch Formulation with only Active Power.\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{D}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, D}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroTurbine, D<:HydroTurbineEnergyDispatch, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroTurbine with HydroTurbineEnergyDispatch Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, HydroEnergyBlockOptimization}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroReservoir, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroReservoir with HydroEnergyBlockOptimization Formulation with only Active Power\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.construct_device!-Union{Tuple{S}, Tuple{H}, Tuple{PowerSimulations.OptimizationContainer, PowerSystems.System, InfrastructureSystems.Optimization.ArgumentConstructStage, PowerSimulations.DeviceModel{H, PowerSimulations.FixedOutput}, PowerSimulations.NetworkModel{S}}} where {H<:PowerSystems.HydroGen, S<:PowerModels.AbstractPowerModel}","page":"Internal API Reference","title":"PowerSimulations.construct_device!","text":"Construct model for PowerSystems.HydroGen` with PowerSimulations.FixedOutput Formulation\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.get_min_max_limits-Tuple{PowerSystems.HydroGen, Type{<:PowerSimulations.ActivePowerVariableLimitsConstraint}, Type{<:HydroPowerSimulations.AbstractHydroFormulation}}","page":"Internal API Reference","title":"PowerSimulations.get_min_max_limits","text":"Min and max active Power Variable limits\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.get_min_max_limits-Tuple{PowerSystems.HydroGen, Type{<:PowerSimulations.ActivePowerVariableLimitsConstraint}, Type{<:HydroPowerSimulations.AbstractHydroReservoirFormulation}}","page":"Internal API Reference","title":"PowerSimulations.get_min_max_limits","text":"Min and max active Power Variable limits\n\n\n\n\n\n","category":"method"},{"location":"api/internal/#PowerSimulations.get_min_max_limits-Tuple{PowerSystems.HydroGen, Type{<:PowerSimulations.ReactivePowerVariableLimitsConstraint}, Type{<:HydroPowerSimulations.AbstractHydroReservoirFormulation}}","page":"Internal API Reference","title":"PowerSimulations.get_min_max_limits","text":"Min and max reactive Power Variable limits\n\n\n\n\n\n","category":"method"},{"location":"#Welcome-to-HydroPowerSimulations.jl","page":"Welcome Page","title":"Welcome to HydroPowerSimulations.jl","text":"","category":"section"},{"location":"#About","page":"Welcome Page","title":"About","text":"","category":"section"},{"location":"","page":"Welcome Page","title":"Welcome Page","text":"HydroPowerSimulations.jl is a Julia package that extends PowerSimulations.jl for modeling of hydro generation technology in operational simulations.","category":"page"},{"location":"#How-to-Use-This-Documentation","page":"Welcome Page","title":"How to Use This Documentation","text":"","category":"section"},{"location":"","page":"Welcome Page","title":"Welcome Page","text":"There are five main sections containing different information:","category":"page"},{"location":"","page":"Welcome Page","title":"Welcome Page","text":"Tutorials - Detailed walk-throughs to help you learn how to use HydroPowerSimulations.jl\nHow to... - Directions to help guide your work for a particular task\nExplanation - Additional details and background information to help you understand HydroPowerSimulations.jl, its structure, and how it works behind the scenes\nReference - Technical references and API for a quick look-up during your work\nModel Library - Technical references of the data types and their functions that HydroPowerSimulations.jl uses to model power system components","category":"page"},{"location":"","page":"Welcome Page","title":"Welcome Page","text":"HydroPowerSimulations.jl strives to follow the Diataxis documentation framework.","category":"page"},{"location":"#Installing-Sienna","page":"Welcome Page","title":"Installing Sienna","text":"","category":"section"},{"location":"","page":"Welcome Page","title":"Welcome Page","text":"Sienna Installation Page on how to install the different packages.\nVisit PowerSimulations.jl  provides the basic models for operation that are used with hydro models in HydroPowerSimulations.jl.\nSienna Documentation Hub: Links to other Sienna packages' documentation\n","category":"page"},{"location":"","page":"Welcome Page","title":"Welcome Page","text":"HydroPowerSimulations has been developed as part of the Flexible Linked Analysis of Streamflow and Hydropower (FLASH), Reliability and Resilience of coordinated water Distribution and power Distribution (R2D2) and HydroWires-C projects at the U.S. Department of Energy's National Renewable Energy Laboratory (NREL) Software Record SWR-23-110.","category":"page"},{"location":"explanation/difference_between_energy_water_models/#Difference-between-Energy-Models-and-Water-Models","page":"Difference between Energy and Water models","title":"Difference between Energy Models and Water Models","text":"","category":"section"},{"location":"explanation/difference_between_energy_water_models/","page":"Difference between Energy and Water models","title":"Difference between Energy and Water models","text":"HydroPowerSimulations.jl allow setting energy targets or hydro budgets in the models formulation. Based on the available data and the desired formulation, the corresponding constraints are added to the DeviceModel.","category":"page"},{"location":"explanation/difference_between_energy_water_models/","page":"Difference between Energy and Water models","title":"Difference between Energy and Water models","text":"Currently, the following formulations allow setting energy targets:\nHydroEnergyModelReservoir\nHydroPumpEnergyDispatch\nHydroTurbineEnergyDispatch\nThe following energy-based models accept passing the EnergyBudgetTimeSeriesParameter:\nHydroDispatchRunOfRiverBudget\nHydroEnergyModelReservoir\nThe following energy-based models accept passing the EnergyTargetTimeSeriesParameter:\nHydroEnergyModelReservoir\nThe following device data models accept passing the EnergyBudgetTimeSeriesParameter:\nHydroGen\nHydroReservoir","category":"page"}]
}
